#:kivy 1.0.9
#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import MDTimePicker kivymd.uix.picker

<ScreenManager>:
    transition: FadeTransition()
    FlushScreen:
    BrewScreen:
    SteamScreen:
    WaterScreen:
    HomeScreen:

<HomeScreen>:
    name: "home"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "background.png"
    FloatLayout:
        Button:
            on_press: root.manager.current = "Brew"
            background_color: (0,0,0,0)
            pos_hint: {"center_y": 0.5, "center_x": 0.225}
            size_hint: (0.2, 0.2)
        Button:
            background_color: (0,0,0,0)
            pos_hint: {"center_y": 0.5, "center_x": 3/6}
            size_hint: (0.2, 0.2)
        Button:
            background_color: (0,0,0,0)
            pos_hint: {"center_y": 0.5, "center_x": 0.775}
            size_hint: (0.2, 0.2)

<BrewLayout@MDFloatLayout>:
    GraphLayout:
        num_graphs: 3
        id: graph_layout
        pos_hint: {"right": 1}
        orientation: "vertical"
    PlayButton:
        on: True
        on_press: graph_layout.toggle()
        on_press: self.toggle()
        pos_hint: {"center_y": 0.1, "center_x": 0.9}

<SteamLayout@MDFloatLayout>:
    GraphLayout:
        num_graphs: 1
        id: graph_layout
        pos_hint: {"right": 1}
        orientation: "vertical"
    PlayButton:
        on: True
        on_press: graph_layout.toggle()
        on_press: self.toggle()
        pos_hint: {"center_y": 0.1, "center_x": 0.9}

<BrewScreen>:
    name: "Brew"
    BrewLayout:

<SteamScreen>:
    name: "Steam"
    SteamLayout:

<WaterScreen>:
    name: "Water"

<FlushScreen>:
    name: "Flush"
    MDFloatLayout:
        MDBoxLayout:
            id: main_layout
            # cols: 2
            # rows: 1
            orientation: "horizontal"
            MDLabel:
                id: duration_label
                text: "Duration"
                size_hint_x: None
                halign: "center"
            MDSlider:
                id: slider
                min: 0
                max: 120
                value: 5
            MDProgressBar:
                id: progress_bar
            MDRaisedButton:
                text: "Change"
                on_press: app.open_duration_picker()
        PlayButton:
            id: play_button
            on: False
            on_press: root.toggle()
            on_press: self.toggle()
            pos_hint: {"center_y": 0.1, "center_x": 0.9}

# canvas.before:
#     Color:
#         rgba: 1, 0, 0, 1
#     Rectangle:
#         pos: self.pos
#         size: self.size
