#:kivy 1.0.9
#:import get_color_from_hex kivy.utils.get_color_from_hex

<MyTile@SmartTileWithStar>
    size_hint_y: None
    height: "240dp"

<ScreenManager>:
    BrewScreen:
    HomeScreen:

<HomeScreen>:
    name: "home"
    canvas.before:
        Rectangle:
            pos: self.pos
            size: self.size
            source: "background.png"
    FloatLayout:
        Button:
            on_press: root.manager.current = "Brew"
            background_color: (0,0,0,0)
            pos_hint: {"center_y": 0.5, "center_x": 0.225}
            size_hint: (0.2, 0.2)
        Button:
            background_color: (0,0,0,0)
            pos_hint: {"center_y": 0.5, "center_x": 3/6}
            size_hint: (0.2, 0.2)
        Button:
            background_color: (0,0,0,0)
            pos_hint: {"center_y": 0.5, "center_x": 0.775}
            size_hint: (0.2, 0.2)

<BrewScreen>:
    name: "Brew"

    MDBoxLayout:
        orientation: "vertical"
        MDToolbar:
            title: "MDNavigationRail"
            md_bg_color: rail.md_bg_color
            left_action_items: [["menu", lambda x: app.rail_open()]]
        MDBoxLayout:
            orientation: "horizontal"
            NavigationRail:
                id: rail
                md_bg_color: get_color_from_hex("#344954")
                color_normal: get_color_from_hex("#718089")
                color_active: get_color_from_hex("#f3ab44")
                use_resizeable: True
                _no_ripple_effect: True
                on_item_switch: root.manager.current = "home"
                text_title: ""
                MDNavigationRailItem:
                    icon: "coffee"
                    text: "Brew"
                    visible: "Selected"
                MDNavigationRailItem:
                    icon: "kettle-steam"
                    text: "Steam"
                MDNavigationRailItem:
                    icon: "cup-water"
                    text: "Water"
                MDNavigationRailItem:
                    icon: "water"
                    text: "Flush"

            MDBoxLayout:
                MDFloatLayout:
                    GraphLayout:
                        id: graph_layout
                        pos_hint: {"right": 1}
                        orientation: "vertical"
                    PlayButton:
                        on_press: graph_layout.toggle()
                        on_press: self.toggle(app)
                        pos_hint: {"center_y": 0.1, "center_x": 0.9}

# canvas.before:
#     Color:
#         rgba: 1, 0, 0, 1
#     Rectangle:
#         pos: self.pos
#         size: self.size
